---
author          : Jakob Voss <voss@gbv.de>
architecture    : any
version         : '`git tag | sort -r | awk "/^v[0-9]+\.[0-9.]+\$/ {print substr(\$1,2)}" | head -1`'
changes         : '`git log -n1 --pretty=format:"  * %s"`'
timestamp       : '`git log -n1 --format="%ad" --date=rfc`'

name            : libsites 
description     : "VZG-Standortverwaltung"
build_depends   : "perl (>= 5.14)"
binary_depends  :
section         : gbv
priority        : extra
port            : 6013

build:
    depends:
        - cpanminus
        - libxml2-dev
        - libssl-dev
        - libexpat-dev
        - devscripts
        - dh-make
    before:
        - cpanm -L perl5 Carton
        - perl -Iperl5/lib/perl5 perl5/bin/carton install
        - perl -Iperl5/lib/perl5 perl5/bin/carton exec -- prove -Ilib t
    files:
        to: srv/libsites
        from:
            - bin
            - cpanfile
            - cpanfile.snapshot
            - lib
            - perl5
            - root
            - .bashrc

    command: "debuild -uc -us"
